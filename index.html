<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>World Star                                                                                               </title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="bg-animation"></div>
    <div class="overlay"></div>
    
    <nav>
        <div class="user-box" id="userInfo">
            <img src="" id="userAvatar" style="display:none; border-radius: 50%; width: 35px; margin-left: 10px;">
            <span id="userName">جاري التحقق..</span>
        </div>
        <div class="nav-links">
            <a onclick="show('about')">من نحن</a>
            <a onclick="show('rules')">القوانين</a>
            <a onclick="show('streamers')">الستريمرز</a>
            <a onclick="show('apply')" class="apply-nav">التقديم</a>
        </div>
    </nav>
<div id="about" class="container active">
    <div class="card">
        <h2 class="section-title"><i class="fas fa-star"></i> من نحن</h2>
        
        <div class="about-content">
            <p class="intro-text">
                نحن مدينة <b>وورلد ستار (World Star)</b>، أكثر من مجرد سيرفر ألعاب.. نحن عالم نابض بالحياة!
            </p>

            <hr>

            <p>
                في <b>وورلد ستار</b>، لن تكون مجرد لاعب يمر مرور الكرام، بل جزءاً من مجتمع متكامل حيث:
            </p>
            
            <ul class="features-list" style="list-style: none; padding: 0;">
                <li><i class="fas fa-check-circle"></i> لكل شخص دور مؤثر، ولكل لحظة قيمة حقيقية.</li>
                <li><i class="fas fa-check-circle"></i> هنا تُصنع الذكريات وتُخاض أصعب التحديات.</li>
                <li><i class="fas fa-check-circle"></i> تعيش تجربة فريدة لا تشبه أي تجربة أخرى.</li>
            </ul>

            <h3 class="subsection-title"><i class="fas fa-history"></i> مسيرتنا</h3>
            <p>
                منذ تأسيس السيرفر في <b>22 ديسمبر 2021</b>، لم يكن هدفنا مجرد بناء منصة للعب، بل بناء <b>"بيت ووطن"</b> يجمع الشغف والحماس. 
            </p>

            <h3 class="subsection-title"><i class="fas fa-users-cog"></i> سر تميزنا</h3>
            <p>
                يتحقق نجاحنا بفضل <b>طاقم إداري محترف</b> يعمل لضمان:
            </p>
            <ul class="admin-perks" style="list-style: none; padding: 0;">
                <li><i class="fas fa-shield-alt"></i> بيئة عادلة تملؤها المنافسة الشريفة.</li>
                <li><i class="fas fa-headset"></i> دعم مستمر واستماع دائم لاقتراحات اللاعبين.</li>
            </ul>

            <p class="closing-statement">
                <strong>هنا لا حدود للطموح.. في وورلد ستار، أنت تصنع قصتك وتحدد مستقبلك بنفسك!</strong>
            </p>
        </div>
    </div>
</div>

    </div>

    <div id="rules" class="container">
        <div class="card">
            <h2 class="section-title" style="color:#ffcc00;"><i class="fas fa-scroll"></i> قوانين صناع المحتوى</h2>
            <ul class="rules-list">
                <li><i class="fas fa-check-circle"></i> الالتزام بقوانين السيرفر بشكل جدي.</li>
                <li><i class="fas fa-check-circle"></i> عدم الخروج عن الرول بلاي مهما كان السبب.</li>
                <li><i class="fas fa-check-circle"></i> تقمص الشخصية بكل حذافيرها (يمنع التلميح).</li>
                <li><i class="fas fa-check-circle"></i> يمنع بث سيرفرات أخرى في روم البثوث.</li>
                <li><i class="fas fa-check-circle"></i> يمنع ذكر سلبيات السيرفر أو القلتشات بالبث.</li>
            </ul>
            <div class="warning-box">
                ⚠️ البث في سيرفرات غير World Star يؤدي لسحب الرتبة فوراً.
            </div>
        </div>
    </div>

   <div id="streamers" class="container">
    <div class="card">
        <h2 class="section-title"><i class="fas fa-video"></i> الستريمرز المعتمدين</h2>
        <a href="https://kick.com/matrix-kwt" target="_blank" class="streamer-link">
            <div class="streamer-tag">Matrix~KWT  </div>

                <a href="https://kick.com/goatsprogaming" target="_blank" class="streamer-link">
            <div class="streamer-tag">Ali Goats</div>

                <a href="https://kick.com/nw9f" target="_blank" class="streamer-link">
            <div class="streamer-tag">ABU ALNEEF </div>

                <a href="https://kick.com/meshal-1000/" target="_blank" class="streamer-link">
            <div class="streamer-tag">Spider</div>

            
                <a href="https://kick.com/isoll1" target="_blank" class="streamer-link">
            <div class="streamer-tag"> SOL</div>

                <a href="https://kick.com/hjrs" target="_blank" class="streamer-link">
            <div class="streamer-tag"> Hjrs </div>

            
                <a href="" target="_blank" class="streamer-link">
            <div class="streamer-tag"> SOON</div>


            
                <a href="" target="_blank" class="streamer-link">
            <div class="streamer-tag"> SOON</div>


            
                <a href="" target="_blank" class="streamer-link">
            <div class="streamer-tag"> SOON</div>


            
                <a href="" target="_blank" class="streamer-link">
            <div class="streamer-tag"> SOON</div>


            
                <a href="" target="_blank" class="streamer-link">
            <div class="streamer-tag"> SOON</div>


        </a>
    </div>
</div>
    <div id="apply" class="container">
        <div class="card" id="applyContent">
            </div>
   <script>
    // الدوال الأساسية للتنقل
    function show(id) {
        document.querySelectorAll('.container').forEach(c => c.classList.remove('active'));
        const target = document.getElementById(id);
        if (target) target.classList.add('active');
    }

    // التحقق من حالة المستخدم عند فتح الموقع
  async function checkUser() {
    try {
        const res = await fetch('/api/user');
        const data = await res.json();
        const userLabel = document.getElementById('userName');
        const applyContent = document.getElementById('applyContent');

        // 1. تحديث بيانات المستخدم في النافبار
        if (data.user) {
            userLabel.innerText = data.user.username;
            const av = document.getElementById('userAvatar');
            if (av) {
                av.src = `https://cdn.discordapp.com/avatars/${data.user.id}/${data.user.avatar}.png`;
                av.style.display = "inline-block";
            }
        } else {
            userLabel.innerText = "زائر";
        }

        // 2. فحص هل التقديم مغلق (هنا الربط مع الديسكورد)
        if (data.isOpen === false) {
            applyContent.innerHTML = `
                <div style="text-align:center; padding:40px; background: rgba(255,0,0,0.1); border-radius:15px; border: 1px solid #ff4444;">
                    <i class="fas fa-lock" style="font-size:50px; color:#ff4444; margin-bottom:15px;"></i>
                    <h2 style="color:#ff4444;">التقديم مغلق حالياً</h2>
                    <p>نعتذر منك، تم إغلاق استقبال الطلبات من قبل الإدارة.</p>
                </div>`;
            return; // توقف هنا ولا تظهر الفورم
        }

        // 3. إذا كان مفتوحاً، فحص هل سجل دخوله أم لا
        if (data.user) {
            renderApplyForm(applyContent, data.user);
        } else {
            applyContent.innerHTML = `
                <div style="text-align:center; padding:50px;">
                    <button onclick="window.location.href='/auth/discord'" class="btn-submit" style="background:#5865f2; width:auto; padding:15px 30px;">
                        <i class="fab fa-discord"></i> تسجيل الدخول عبر ديسكورد للتقديم
                    </button>
                </div>`;
        }
    } catch (err) {
        console.error("خطأ في الاتصال بالسيرفر:", err);
    }

}

function renderApplyForm(container) {

    container.innerHTML = `
        <h2 class="section-title">استمارة صناع المحتوى</h2>
        <form id="finalApplyForm" style="display:flex; flex-direction:column; gap:12px; text-align:right;">
            <label>الاسم الكامل *</label>
            <input type="text" id="fName" required class="form-input">
            
            <label>العمر *</label>
            <input type="number" id="fAge" required class="form-input">
            
            <label>اسم القناة والرابط * <span style="color:#ff4444; font-size:12px;">(تقدر تحط أكثر من رابط)</span></label>
            <textarea id="fLinks" required class="form-input" style="border: 1px solid #ff4444; height:80px;"></textarea>
            
            <label>عدد المشاهدات + المشتركين *</label>
            <input type="text" id="fStats" required class="form-input">
            
<label>8. نوع المحتوى الذي ستقدمه؟ *</label>
            <select id="fContentType" required class="form-input" style="cursor:pointer;">
                <option value="" disabled selected>اختر النوع..</option>
                <option value="تصوير (فيديوهات)">تصوير (فيديوهات)</option>
                <option value="بث مباشر (ستريم)">بث مباشر (ستريم)</option>
                <option value="كلاهما (تصوير وبث)">كلاهما (تصوير وبث)</option>
            </select>

            <label>عرف أكثر عن نفسك كصانع محتوى *</label>
            <textarea id="fAbout" required class="form-input" style="height:80px;"></textarea>
            
        
            <label>ماذا تحتاج من الإدارة لكي تساعدك بالمحتوى؟ *</label>
            <textarea id="fNeeds" required class="form-input" style="height:80px;"></textarea>
            
            <label>ماهي أهدافك مع سيرفر ورلد ستار؟ *</label>
            <textarea id="fGoals" required class="form-input" style="height:80px;"></textarea>
            
            <button type="submit" id="submitBtn" class="btn-submit">إرسال التقديم</button>
        </form>`;

    document.getElementById('finalApplyForm').onsubmit = async (e) => {
        e.preventDefault();
        const btn = document.getElementById('submitBtn');
        btn.disabled = true;
        btn.innerText = "جاري الإرسال...";

        // تجميع البيانات للحقول السبعة
      const formData = {
            fullName: document.getElementById('fName').value,
            age: document.getElementById('fAge').value,
            links: document.getElementById('fLinks').value,
            stats: document.getElementById('fStats').value,
            about: document.getElementById('fAbout').value,
            needs: document.getElementById('fNeeds').value,
            goals: document.getElementById('fGoals').value,
            contentType: document.getElementById('fContentType').value // إرسال الخيار المختار
        };

        try {
            const res = await fetch('/api/submit', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(formData)
            });

            if (res.ok) {
                alert("✅ تم إرسال طلبك بنجاح!");
            } else {
                const err = await res.json();
                alert("❌ فشل الإرسال: " + (err.error || "خطأ غير معروف"));
                btn.disabled = false;
                btn.innerText = "إرسال التقديم";
            }
        } catch (err) {
            alert("❌ السيرفر غير متصل!");
            btn.disabled = false;
        }
    };
}
    window.onload = checkUser;
</script>
</body>
</html>

<div class="footer-fixed-bottom">
    <div class="footer-content">
        <p class="server-text">الموقع الرسمي لسيرفر <span class="server-brand">™ WORLD STAR RP</span></p>
       
           
                <svg class="verify-badge" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M10.5213 2.62368C11.3147 1.75255 12.6853 1.75255 13.4787 2.62368L14.4989 3.74391C14.8326 4.11035 15.3052 4.30544 15.7983 4.28118L17.3061 4.20713C18.4796 4.14949 19.4625 5.13235 19.4048 6.30589L19.3308 7.81367C19.3065 8.30681 19.5016 8.7794 19.868 9.11306L20.9882 10.1333C21.8594 10.9267 21.8594 12.2973 20.9882 13.0907L19.868 14.1109C19.5016 14.4446 19.3065 14.9172 19.3308 15.4103L19.4048 16.9181C19.4625 18.0916 18.4796 19.0745 17.3061 19.0168L15.7983 18.9428C15.3052 18.9185 14.8326 19.1136 14.4989 19.4801L13.4787 20.5997C12.6853 21.4709 11.3147 21.4709 10.5213 20.5997L9.50109 19.4801C9.16743 19.1136 8.69484 18.9185 8.20167 18.9428L6.69389 19.0168C5.52035 19.0745 4.5375 18.0916 4.59513 16.9181L4.66916 15.4103C4.69342 14.9172 4.49833 14.4446 4.1319 14.1109L3.01235 13.0907C2.14122 12.2973 2.14122 10.9267 3.01235 10.1333L4.1319 9.11306C4.49833 8.7794 4.69342 8.30681 4.66916 7.81367L4.59513 6.30589C4.5375 5.13235 5.52035 4.14949 6.69389 4.20713L8.20167 4.28118C8.69484 4.30544 9.16743 4.11035 9.50109 3.74391L10.5213 2.62368Z" fill="#1DA1F2"/>
                    <path d="M9 12L11 14L15 10" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </span>
        </p>
    </div>


<style>
    /* هذا الجزء يضمن بقاء الكود في أسفل الصفحة */
    .footer-fixed-bottom {
        width: 100%;
        background: #00000000; /* لون أسود ملكي */
        padding: 40px 0; /* مساحة واسعة من فوق وتحت */
        margin-top: 100px; /* يبعد الكود عن المحتوى اللي فوقه */
        text-align: center;
        border-top: 1px solid #22222200;
        font-family: 'Segoe UI', sans-serif;
        direction: rtl;
    }

    .server-brand {
        color: #fff;
        font-weight: bold;
        letter-spacing: 1px;
    }

    .dev-text {
        margin-top: 15px;
        color: #888;
        font-size: 0.95em;
    }

    .dev-name {
        background: linear-gradient(90deg, #1DA1F2, #fff, #1DA1F2);
        background-size: 200%;
        -webkit-text-fill-color: transparent;
        animation: shine 3s infinite linear;
        font-weight: bold;
        display: inline-flex;
        align-items: center;
        gap: 5px;
    }

    .verify-badge {
        width: 18px;
        height: 18px;
    }
.input-group label {
    display: block;
    font-weight: bold;
    color: #1DA1F2; /* أزرق سماوي واضح */
    margin-bottom: 5px;
    font-size: 14px;
}

    @keyframes shine {

    
        to { background-position: 200%; }
    }
</style>




